
<% javascript_tag do %>
  window.relationships = <%= j @graph.relationship_starts %>
<% end %>

<div id="header_bar">
  <div class="right_side">
    <button id="save_button">Save</button>
    <a href="#" onclick="$('#settings').show()">Settings</a>
  </div>
  <%= link_to '<< All Graphs', graphs_path %>
  <h1><%= @graph.name %></h1>
</div>
<svg width="100%" height="100%">
  <path id="relationship1" stroke="black" stroke-width="2" fill="none" />
</svg>
<div id="settings">
  <div style="text-align: right;">
    <a href="#" onclick="$('#settings').hide()">Close</a>
  </div>
  <%= form_for @graph do |f| %>
  <div class="field">
    <%= f.label :short_name %><br>
    <%= f.text_field :short_name %>
  </div>
  <div class="field">
    <%= f.label :read_password %><br>
    <%= f.text_field :read_password %>
  </div>
  <div class="field">
    <%= f.label :write_password %><br>
    <%= f.text_field :write_password %>
  </div>
  <div class="field">
    <%= f.label :description %><br>
    <%= f.text_area :description %>
  </div>
  <% end %>
</div>


<div class="editorbox" style="position: relative;">
<% @graph.entities.each do |entity| %>
  <div class="entity" title="<%= entity.name %>" data-id="<%= entity.id %>" data-name="<%= entity.name %>" data-width="<%= entity.width.to_s %>" data-height="<%= entity.height.to_s %>" data-x="<%= entity.x.to_s %>" data-y="<%= entity.y.to_s %>">
    <form class="entity-attributes" style="height: 98%; width: 98%;">
      <textarea name="attributes" class="attributes" style="height: 100%; width: 100%; resize: none; border: none;"><%= entity.attrib %></textarea>
    </form>
  </div>
<% end %>
</div>
